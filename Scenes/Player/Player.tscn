[gd_scene load_steps=19 format=3 uid="uid://c1nmhavvp6eip"]

[ext_resource type="Script" path="res://Scripts/Player/ThirdPersonCamera.gd" id="1_5i1xc"]
[ext_resource type="PackedScene" uid="uid://cemm5m2y7lvny" path="res://Models/Characters/BaseHumanRigged.blend" id="1_7kr00"]
[ext_resource type="Script" path="res://Scripts/Player/PlayerMovement.gd" id="2_afa8s"]
[ext_resource type="Material" uid="uid://dl3suugmpf0on" path="res://Materials/Characters/Player/PlayerToonMaterial.tres" id="2_j3d03"]
[ext_resource type="Script" path="res://Scripts/SpellCasting/SpellFactory.gd" id="4_8qt2s"]
[ext_resource type="PackedScene" uid="uid://cs233npw823ao" path="res://Scenes/Spells/GroundSummonSpell.tscn" id="6_7bph8"]
[ext_resource type="PackedScene" uid="uid://ciigyoq5t4o5s" path="res://Scenes/Effects/FireColumn.tscn" id="7_hmg1f"]
[ext_resource type="PackedScene" uid="uid://dag86tou2cehq" path="res://Scenes/Effects/IceColumn.tscn" id="7_wbj11"]
[ext_resource type="Script" path="res://Scripts/SpellCasting/SpellEffects/Ice/FreezablePlayer.gd" id="8_ffrmc"]
[ext_resource type="PackedScene" uid="uid://dtluxk7384hxd" path="res://Scenes/Effects/Flammable.tscn" id="9_qwkcm"]
[ext_resource type="PackedScene" uid="uid://gwlsad3v7l5s" path="res://Scenes/Characters/Health.tscn" id="10_s2uey"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_2bqhc"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_nkyb4"]
animation = &"Idle"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_os5o3"]
filter_enabled = true
filters = ["Spine/Skeleton3D:l.Leg", "Spine/Skeleton3D:r.Leg"]

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_piusr"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_nteic"]
animation = &"Jump"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_reaal"]
animation = &"Walk"

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_hssfi"]
nodes/idle_anim/node = SubResource("AnimationNodeAnimation_nkyb4")
nodes/idle_anim/position = Vector2(-180, 80)
nodes/idle_walk/node = SubResource("AnimationNodeBlend2_os5o3")
nodes/idle_walk/position = Vector2(40, 140)
nodes/jump/node = SubResource("AnimationNodeBlend2_piusr")
nodes/jump/position = Vector2(300, 240)
nodes/jump_anim/node = SubResource("AnimationNodeAnimation_nteic")
nodes/jump_anim/position = Vector2(40, 440)
nodes/output/position = Vector2(520, 220)
nodes/walk_anim/node = SubResource("AnimationNodeAnimation_reaal")
nodes/walk_anim/position = Vector2(-180, 280)
node_connections = [&"output", 0, &"jump", &"idle_walk", 0, &"idle_anim", &"idle_walk", 1, &"walk_anim", &"jump", 0, &"idle_walk", &"jump", 1, &"jump_anim"]

[node name="Player" type="CharacterBody3D" groups=["Player"]]

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_2bqhc")

[node name="Visuals" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="BaseHumanRigged" parent="Visuals" instance=ExtResource("1_7kr00")]
transform = Transform3D(-0.47, 0, -4.10887e-08, 0, 0.47, 0, 4.10887e-08, 0, -0.47, 0, -1.0149, 0)

[node name="Skeleton3D" parent="Visuals/BaseHumanRigged/Spine" index="0"]
bones/1/rotation = Quaternion(0.00973588, 1.19204e-07, 4.24226e-09, 0.999953)
bones/3/rotation = Quaternion(1.90209e-07, -3.24013e-08, -0.570486, 0.821308)
bones/4/rotation = Quaternion(3.44696e-08, -1.05082e-07, -0.184278, 0.982874)
bones/7/rotation = Quaternion(9.49583e-08, -2.70249e-07, 0.677838, 0.735211)
bones/8/rotation = Quaternion(1.88272e-07, 3.25594e-08, 0.564674, 0.825314)
bones/9/rotation = Quaternion(3.82295e-08, 1.04657e-07, 0.204379, 0.978892)
bones/11/rotation = Quaternion(-0.695425, 9.28346e-08, 3.5957e-09, 0.718599)
bones/13/rotation = Quaternion(-0.695425, -9.28346e-08, -3.5957e-09, 0.718599)

[node name="Body" parent="Visuals/BaseHumanRigged/Spine/Skeleton3D" index="0"]
surface_material_override/0 = ExtResource("2_j3d03")

[node name="CameraMount" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.35106, 0)

[node name="Camera3D" type="Camera3D" parent="CameraMount"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.14051, 1.37127, 4.89405)

[node name="ThirdPersonCamera" type="Node3D" parent="." node_paths=PackedStringArray("camera_target", "camera_mount")]
script = ExtResource("1_5i1xc")
camera_target = NodePath("..")
camera_mount = NodePath("../CameraMount")

[node name="PlayerMovement" type="Node3D" parent="." node_paths=PackedStringArray("player_node", "animation_tree")]
script = ExtResource("2_afa8s")
player_node = NodePath("..")
animation_tree = NodePath("../AnimationTree")

[node name="SpellFactory" type="Node3D" parent="."]
script = ExtResource("4_8qt2s")

[node name="GroundSummonSpell" parent="SpellFactory" instance=ExtResource("6_7bph8")]
fire_column_scene = ExtResource("7_hmg1f")
ice_column_scene = ExtResource("7_wbj11")

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeBlendTree_hssfi")
anim_player = NodePath("../Visuals/BaseHumanRigged/AnimationPlayer")
active = true
parameters/idle_walk/blend_amount = 0.0
parameters/jump/blend_amount = 0.0

[node name="Freezable" type="Node3D" parent="." node_paths=PackedStringArray("player_movement")]
script = ExtResource("8_ffrmc")
player_movement = NodePath("../PlayerMovement")

[node name="Flammable" parent="." instance=ExtResource("9_qwkcm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.05667, 0)

[node name="Health" parent="." instance=ExtResource("10_s2uey")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.50256, 0)
visible = false

[editable path="Visuals/BaseHumanRigged"]
